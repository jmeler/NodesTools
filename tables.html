<!doctype html>
<html class="no-js" lang="en">

<head>
    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Eines Nodes</title>
    <link rel="shortcut icon" type="image/png" href="images/favicon.png" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/foundation-sites@6.6.3/dist/css/foundation.min.css"
        integrity="sha256-ogmFxjqiTMnZhxCqVmcqTvjfe1Y/ec4WaRj/aQPvn+I=" crossorigin="anonymous">
    <link rel='stylesheet' href='styles.css' type='text/css' media='all' />

    <style>
        #preview .grid-x div {
            padding: 0.3em;
            /*border: 1px solid #ddd;*/
        }
        .button{
            margin:0.1;
        }
    </style>


    <script src="utils.js"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"
        integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>

</head>

<body>

    <div id="app">
        <div class="top-bar">
            <div class="top-bar-left">
                <ul class="dropdown menu" data-dropdown-menu>
                    <li><img class="logo" src="images/nodes_small.png"></li>
                    <li class="menu-text">Eines NODES</li>
                    <li><a href="index.html">Inici</a></li>
                    <li><a href="banner.html">Avisos i anuncis</a></li>
                    <li><a href="simple-button.html">Botó</a></li>
                    <li class="active"><a href="tables.html">Taules adaptatives</a></li>
                </ul>
            </div>
            <div class="top-bar-right">
                <ul class="menu">
                    <li><a target="_blank" href="https://agora.xtec.cat/nodes">Sobre NODES</a></li>
                </ul>
            </div>
        </div>

        <br>

        <div class="grid-x grid-margin-x grid-padding-x">
            <div class="cell medium-4 large-4">

                <div class="card">
                    <div class="card-divider">
                        <h5>1. Codi HTML de la taula</h5>
                    </div>

                    <div class="card-section ">
                        <p>Enganxa aquí el codi HTML de la taula.
                            Per obtenir-ho, ves a la pestanya "text" i copia el contingut desde <code>&#60;table></code>
                            fins a <code>&#60/table></code></p>

                        <textarea class="ta-html" id="taula_html" name="taula_html" v-model="taula_html">
                        </textarea>

                        <p>O carrega algun dels exemples:</p>

                        <select v-model="taula_exemple" @change="select_taula_ex($event)">
                            <option value="ex_taula_13">1x3</option>
                            <option value="ex_taula_22">2x2</option>
                            <option value="ex_taula_33">3x3</option>
                            <option value="ex_taula_33_img">Imatges (3x3)</option>
                            <option value="ex_taula_13_img_link">Imatges amb enllaç (1x3)</option>
                            <option value="ex_taula_22_img_link">Imatges amb enllaç (2x2)</option>
                            <option value="ex_taula_33_img_link">Imatges amb enllaç (3x3)</option>
                          </select>

                        <button class="button primary " v-on:click="clean">Neteja</button>

                    </div> <!-- End Card Section-->
                </div>
            </div>

            <div class="cell medium-8 large-8">
                <div class="card" id="preview">
                    <div class="card-divider">
                        <h5>2. Previsualització </h5>
                    </div>

                    <div class="card-section">
                        <span v-html=codi_html_f6></span>
                    </div>
                </div>

                <div class="card">
                    <div class="card-divider">
                        <h5>3. Codi HTML </h5>
                    </div>
                    <div class="card-section">
                        <div class="grid-x">
                            <div class="columns cell small-12 large-12">
                                <textarea class="ta-html" id="codi-html" v-model="codi_html">
                                </textarea>
                                <button class="button primary" onclick="copyCode()">Copia Codi HTML</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.11"></script>
    <!-- Compressed JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/foundation-sites@6.6.3/dist/js/foundation.min.js"
        integrity="sha256-pRF3zifJRA9jXGv++b06qwtSqX1byFQOLjqa2PTEb2o=" crossorigin="anonymous"></script>

    <script>
        $(document).foundation();
    </script>

    <script>
        var app = new Vue({
            el: '#app',
            data: {
                taula_html: '',
                taula_exemple:'33',
                exemples:{
ex_taula_13: '\<table style="width: 141px;">\
<tbody>\n\
<tr>\n\
<td>Contingut Fila 1, Columna 1</td>\n\
<td>Contingut Fila 1, Columna 2</td>\n\
<td>Contingut Fila 1, Columna 3</td>\n\
</tr>\n\
</tbody>\n\
</table>',
ex_taula_22: '\<table style="width: 141px;">\
<tbody>\n\
<tr>\n\
<td>Contingut Fila 1, Columna 1</td>\n\
<td>Contingut Fila 1, Columna 2</td>\n\
</tr>\n\
<tr>\n\
<td>Contingut Fila 2, Columna 1</td>\n\
<td>Contingut Fila 2, Columna 2</td>\n\
</tr>\n\
</tbody>\n\
</table>',

ex_taula_33: '\<table style="width: 141px;">\
<tbody>\n\
<tr>\n\
<td>Contingut Fila 1, Columna 1</td>\n\
<td>Contingut Fila 1, Columna 2</td>\n\
<td>Contingut Fila 1, Columna 3</td>\n\
</tr>\n\
<tr>\n\
<td>Contingut Fila 2, Columna 1</td>\n\
<td>Contingut Fila 2, Columna 2</td>\n\
<td>Contingut Fila 2, Columna 3</td>\n\
</tr>\n\
<tr>\n\
<td>Contingut Fila 3, Columna 1</td>\n\
<td>Contingut Fila 3, Columna 2</td>\n\
<td>Contingut Fila 3, Columna 3</td>\n\
</tr>\n\
</tbody>\n\
</table>',

ex_taula_33_img: '\<table style="width: 141px;">\
<tbody>\n\
<tr>\n\
<td><img src="https://img.icons8.com/color/120/000000/expired.png"></td>\n\
<td><img src="https://img.icons8.com/color/120/000000/leave.png"></td>\n\
<td><img src="https://img.icons8.com/color/120/000000/task.png"></td>\n\
</tr>\n\
<tr>\n\
<td><img src="https://img.icons8.com/color/120/000000/request-service.png"></td>\n\
<td><img src="https://img.icons8.com/color/120/000000/communication.png"></td>\n\
<td><img src="https://img.icons8.com/color/120/000000/documents.png"></td>\n\
</tr>\n\
<tr>\n\
<td><img src="https://img.icons8.com/color/120/000000/planner.png"></td>\n\
<td><img src="https://img.icons8.com/color/120/000000/collaboration-female-male.png"></td>\n\
<td><img src="https://img.icons8.com/color/120/000000/high-priority.png"></td>\n\
</tr>\n\
</tbody>\n\
</table>',

ex_taula_13_img_link: '\<table style="width: 141px;">\
<tbody>\n\
<tr>\n\
<td><a href="http://www.globalgoals.org/1-no-poverty"><img src="https://img.icons8.com/color/120/000000/expired.png"></a></td>\n\
<td><a href="http://www.globalgoals.org/2-zero-hunger"><img src="https://img.icons8.com/color/120/000000/leave.png"></a></td>\n\
<td><a href="http://www.globalgoals.org/3-good-health-and-well-being"><img src="https://img.icons8.com/color/120/000000/task.png"></a></td>\n\
</tr>\n\
</tbody>\n\
</table>',

ex_taula_22_img_link: '\<table style="width: 141px;">\
<tbody>\n\
<tr>\n\
<td><a href="http://www.globalgoals.org/1-no-poverty"><img src="https://img.icons8.com/color/120/000000/expired.png"></a></td>\n\
<td><a href="http://www.globalgoals.org/2-zero-hunger"><img src="https://img.icons8.com/color/120/000000/leave.png"></a></td>\n\
</tr>\n\
<tr>\n\
<td><a href="http://www.globalgoals.org/4-quality-education"><img src="https://img.icons8.com/color/120/000000/request-service.png"></a></td>\n\
<td><a href="http://www.globalgoals.org/5-gender-equality"><img src="https://img.icons8.com/color/120/000000/communication.png"></a></td>\n\
</tr>\n\
</tbody>\n\
</table>',

ex_taula_33_img_link: '\<table style="width: 141px;">\
<tbody>\n\
<tr>\n\
<td><a href="http://www.globalgoals.org/1-no-poverty"><img src="https://img.icons8.com/color/120/000000/expired.png"></a></td>\n\
<td><a href="http://www.globalgoals.org/2-zero-hunger"><img src="https://img.icons8.com/color/120/000000/leave.png"></a></td>\n\
<td><a href="http://www.globalgoals.org/3-good-health-and-well-being"><img src="https://img.icons8.com/color/120/000000/task.png"></a></td>\n\
</tr>\n\
<tr>\n\
<td><a href="http://www.globalgoals.org/4-quality-education"><img src="https://img.icons8.com/color/120/000000/request-service.png"></a></td>\n\
<td><a href="http://www.globalgoals.org/5-gender-equality"><img src="https://img.icons8.com/color/120/000000/communication.png"></a></td>\n\
<td><a href="http://www.globalgoals.org/6-clean-water-and-sanitation"><img src="https://img.icons8.com/color/120/000000/documents.png"></a></td>\n\
</tr>\n\
<tr>\n\
<td><a href="http://www.globalgoals.org/7-affordable-and-clean-energy"><img src="https://img.icons8.com/color/120/000000/planner.png"></a></td>\n\
<td><a href="http://www.globalgoals.org/8-decent-work-and-economic-growth"><img src="https://img.icons8.com/color/120/000000/collaboration-female-male.png"></a></td>\n\
<td><a href="http://www.globalgoals.org/9-industry-innovation-and-infrastructure"><img src="https://img.icons8.com/color/120/000000/high-priority.png"></a></td>\n\
</tr>\n\
</tbody>\n\
</table>',
            }


            },
            methods: {

                clean: function (event) {
                    this.taula_html="";
                },
                select_taula_ex(event) {
                    this.taula_html = this.exemples[event.target.value];
                }

            },
            computed: {
                codi_html: function () {

                    var files = (this.taula_html.match(/<tr>/g) || []).length;
                    var columnes = (this.taula_html.match(/<td/g) || []).length;
                    columnes = columnes / files;
                    large_size = 12 / columnes;

                    if (this.taula_html != "" && Number.isInteger(large_size) == false) {
                        return '<h5 style="color:red">Error en el format de la taula</h5>';
                    }

                    converted_table = this.taula_html.replace(/<table style="width: (.*)px;"><tbody>/gi,
                        '');
                    converted_table = converted_table.replace(/<table><tbody>/gi, '');
                    converted_table = converted_table.replace(/<tr>/gi, '<div class="row">\n');
                    converted_table = converted_table.replace(/<\/td>/gi, '<\/div>\n');
                    converted_table = converted_table.replace(/<td style="width: (.*)px;">/gi,
                        '<div class="small-12 large-' + large_size + ' columns">');
                    converted_table = converted_table.replace(/<td>/gi,
                        '<div class="small-12 large-' + large_size + ' columns">');
                    converted_table = converted_table.replace(/<\/tr>/gi, '</div>\n');
                    converted_table = converted_table.replace(/<\/tbody>/gi, '');
                    converted_table = converted_table.replace(/<\/table>/gi, '');

                    return converted_table;

                },
                codi_html_f6: function () {
                    converted_table = this.codi_html.replace(/class="row"/gi, 'class="grid-x"');
                    converted_table = converted_table.replace(/small-12/gi, 'cell small-12');
                    return converted_table
                }
            }
        })
    </script>

</body>

</html>